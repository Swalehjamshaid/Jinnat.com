{% extends 'base.html' %}
{% block content %}
<div class="container py-5">
    <div class="card shadow-sm border-0 mb-4">
        <div class="card-body d-flex justify-content-between align-items-center" style="background: #f8f9fa; border-radius: 8px;">
            <div>
                <h1 class="h4 mb-1">Audit Results for <span class="text-primary">{{ url }}</span></h1>
                <p class="text-muted small mb-0">Analysis Date: 2026 | FF Tech AI Engine</p>
            </div>
            <div class="text-right">
                <span class="badge bg-primary px-4 py-2" style="font-size: 1.1rem; background-color: #2563eb !important;">Grade: {{ grade }}</span>
            </div>
        </div>
    </div>

    <div class="p-5 mb-5 bg-white border rounded-3 text-center shadow-sm" style="border-top: 5px solid #2563eb !important;">
        <div class="mb-3">
            <i class="fas fa-file-pdf fa-4x" style="color: #ef4444;"></i>
        </div>
        <h2 class="fw-bold">Your Professional Report is Ready</h2>
        <p class="col-md-8 fs-5 mx-auto text-muted">
            Includes 5 pages of colorful charts, site health metrics, and your custom 90-day future growth roadmap.
        </p>
        
        {% if id %}
        <a href="/api/reports/pdf/{{ id }}" class="btn btn-primary btn-lg px-5 mt-3 shadow-sm" style="background: #2563eb; border: none;">
            <i class="fas fa-download mr-2"></i> DOWNLOAD 5-PAGE PDF REPORT
        </a>
        {% else %}
        <button class="btn btn-secondary btn-lg px-5 mt-3" disabled>
            <span class="spinner-border spinner-border-sm mr-2"></span> Generating Report...
        </button>
        {% endif %}
    </div>

    <h3 class="h5 mb-4 fw-bold text-secondary text-uppercase">Technical Breakdown</h3>
    <div class="row">
        {% for category, score in category_scores.items() %}
        <div class="col-md-6 mb-4">
            <div class="card border-0 shadow-sm p-4">
                <div class="d-flex justify-content-between mb-2">
                    <span class="fw-bold text-dark">{{ category }}</span>
                    <span class="fw-bold text-primary">{{ score }}%</span>
                </div>
                <div class="progress" style="height: 12px; background-color: #e9ecef;">
                    <div class="progress-bar" role="progressbar" 
                         style="width: {{ score }}%; background: #0ea5e9; border-radius: 5px;"></div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<script>
    {% if not id %}
    setTimeout(function() {
        window.location.reload();
    }, 5000);
    {% endif %}
</script>
{% endblock %}
